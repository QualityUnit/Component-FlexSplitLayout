import{r as t,h as i,g as s}from"./p-5c4ec850.js";const e=class{constructor(i){t(this,i),this.depth=0,this.overrideIframe=!0,this.name="",this.save=!0,this.disabled=!1,this.resizing=!1,this.direction=1,this.localStorageKey="flex-resizer-"+this.name,this.resizeStart=this.resizeStart.bind(this),this.resize=this.resize.bind(this),this.resizeEnd=this.resizeEnd.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}render(){return i("div",null)}resizeStart(t){let i=this.normalizeDepth();if(this.a=i.previousElementSibling,this.b=i.nextElementSibling,null===this.a||this.resizing)return void console.log("Nothing to resize");if(this.totalFlexGrow=parseFloat(getComputedStyle(this.a)["flex-grow"])+parseFloat(getComputedStyle(this.b)["flex-grow"]),this.aOriginalGrow=getComputedStyle(this.a)["flex-grow"],this.bOriginalGrow=getComputedStyle(this.b)["flex-grow"],0===this.totalFlexGrow)return void console.log("Cannot resize - no flex-grow");let s=""+getComputedStyle(i.parentElement).flexDirection;switch(s){case"column-reverse":case"column":this.getElementSize=t=>t.clientHeight,this.getPosition=t=>t.screenY;break;case"row-reverse":default:this.getElementSize=t=>t.clientWidth,this.getPosition=t=>t.screenX}if(this.direction=s.endsWith("-reverse")?-1:1,this.psize=this.computeSize(this.a),this.startPos=this.getPosition(this.handleResizeEvent(t)),this.resizeCurrentPos=this.startPos,this.nsize=this.computeSize(this.b),this.totalHeight=this.psize+this.nsize,document.querySelector("html").style.cursor="row-resize",this.el.style.cursor="row-resize",this.resizing=!0,t.preventDefault(),this.overrideIframe)for(let t of document.getElementsByTagName("iframe"))t.style.pointerEvents="none";window.addEventListener("mousemove",this.resize),window.addEventListener("touchmove",this.resize),window.addEventListener("mouseup",this.resizeEnd),window.addEventListener("touchend",this.resizeEnd),window.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){"Escape"===t.key&&this.cancelResize()}cancelResize(){this.a.style["flex-grow"]=this.aOriginalGrow,this.b.style["flex-grow"]=this.bOriginalGrow,this.resizeEnd()}resizeEnd(){if(this.save&&(localStorage.setItem(this.localStorageKey+"a",this.a.style["flex-grow"]),localStorage.setItem(this.localStorageKey+"b",this.b.style["flex-grow"])),window.removeEventListener("mousemove",this.resize),window.removeEventListener("mouseup",this.resizeEnd),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("touchmove",this.resize),window.removeEventListener("touchend",this.resizeEnd),this.resizing=!1,document.querySelector("html").style.cursor="default",this.el.style.cursor="ns-resize",this.overrideIframe)for(let t of document.getElementsByTagName("iframe"))t.style.pointerEvents="auto"}resize(t){t.preventDefault();let i=this.getPosition(this.handleResizeEvent(t)),s=(i-this.resizeCurrentPos)*this.direction;this.psize+=s,this.nsize-=s,this.psize<0&&(this.nsize+=this.psize,i-=this.psize,this.psize=0),this.nsize<0&&(this.psize+=this.nsize,i+=this.nsize,this.nsize=0);let e=this.totalFlexGrow*(this.psize/this.totalHeight),h=this.totalFlexGrow*(this.nsize/this.totalHeight);this.resizeCurrentPos=i,this.a.style["flex-grow"]=e,this.b.style["flex-grow"]=h}computeSize(t){let i=0,s=""+getComputedStyle(t)["flex-basis"],e=parseFloat(s);return s.endsWith("px")&&(i-=e),s.endsWith("%")&&(i-=this.getElementSize(t.parentElement)*e/100),this.getElementSize(t)+i}handleResizeEvent(t){return window.TouchEvent&&t instanceof TouchEvent?t.touches.item(0):window.MouseEvent&&t instanceof MouseEvent?t:void 0}normalizeDepth(){let t=this.el;for(let i=0;i<this.depth;i++)t=t.parentElement;return t}connectedCallback(){let t=this.normalizeDepth();if(this.disabled)return void(t.style.display="none");this.a=t.previousElementSibling,this.b=t.nextElementSibling;let i=localStorage.getItem(this.localStorageKey+"a");null!=i&&this.save&&(this.a.style["flex-grow"]=i,this.b.style["flex-grow"]=localStorage.getItem(this.localStorageKey+"b"))}watchDisabled(t){let i=this.normalizeDepth();t||this.connectedCallback(),i.style.display=t?"none":"block"}get el(){return s(this)}static get watchers(){return{disabled:["watchDisabled"]}}};e.style=".sc-flex-resizer-h{display:block}";export{e as flex_resizer}