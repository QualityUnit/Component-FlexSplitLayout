import{r as t,h as s,g as i}from"./p-181ef2d9.js";const e=class{constructor(s){t(this,s),this.depth=0,this.overrideIframe=!0,this.name="",this.save=!0,this.disabled=!1,this.resizing=!1,this.direction=1,this.localStorageKey="flex-resizer-"+this.name,this.resizeStart=this.resizeStart.bind(this),this.resize=this.resize.bind(this),this.resizeEnd=this.resizeEnd.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}render(){return s("div",null)}resizeStart(t){let s=this.normalizeDepth();if(this.a=s.previousElementSibling,this.b=s.nextElementSibling,null===this.a||this.resizing)return void console.log("Nothing to resize");if(this.totalFlexGrow=parseFloat(getComputedStyle(this.a)["flex-grow"])+parseFloat(getComputedStyle(this.b)["flex-grow"]),this.aOriginalGrow=getComputedStyle(this.a)["flex-grow"],this.bOriginalGrow=getComputedStyle(this.b)["flex-grow"],0===this.totalFlexGrow)return void console.log("Cannot resize - no flex-grow");let i=""+getComputedStyle(s.parentElement).flexDirection;switch(i){case"column-reverse":case"column":this.getElementSize=t=>t.clientHeight,this.getPosition=t=>t.screenY;break;case"row-reverse":default:this.getElementSize=t=>t.clientWidth,this.getPosition=t=>t.screenX}if(this.direction=i.endsWith("-reverse")?-1:1,this.psize=this.computeSize(this.a),this.startPos=this.getPosition(this.handleResizeEvent(t)),this.resizeCurrentPos=this.startPos,this.nsize=this.computeSize(this.b),this.totalHeight=this.psize+this.nsize,document.body.style.cursor=this.cursor,this.resizing=!0,t.preventDefault(),this.overrideIframe)for(let t of document.getElementsByTagName("iframe"))t.style.pointerEvents="none";window.addEventListener("mousemove",this.resize),window.addEventListener("touchmove",this.resize),window.addEventListener("mouseup",this.resizeEnd),window.addEventListener("touchend",this.resizeEnd),window.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){"Escape"===t.key&&this.cancelResize()}cancelResize(){this.a.style["flex-grow"]=this.aOriginalGrow,this.b.style["flex-grow"]=this.bOriginalGrow,this.resizeEnd()}resizeEnd(){if(this.save&&(localStorage.setItem(this.localStorageKey+"a",this.a.style["flex-grow"]),localStorage.setItem(this.localStorageKey+"b",this.b.style["flex-grow"])),window.removeEventListener("mousemove",this.resize),window.removeEventListener("mouseup",this.resizeEnd),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("touchmove",this.resize),window.removeEventListener("touchend",this.resizeEnd),this.resizing=!1,document.body.style.cursor="default",this.overrideIframe)for(let t of document.getElementsByTagName("iframe"))t.style.pointerEvents="auto"}resize(t){t.preventDefault();let s=this.getPosition(this.handleResizeEvent(t)),i=(s-this.resizeCurrentPos)*this.direction;this.psize+=i,this.nsize-=i,this.psize<0&&(this.nsize+=this.psize,s-=this.psize,this.psize=0),this.nsize<0&&(this.psize+=this.nsize,s+=this.nsize,this.nsize=0);let e=this.totalFlexGrow*(this.psize/this.totalHeight),h=this.totalFlexGrow*(this.nsize/this.totalHeight);this.resizeCurrentPos=s,this.a.style["flex-grow"]=e,this.b.style["flex-grow"]=h}computeSize(t){let s=0,i=""+getComputedStyle(t)["flex-basis"],e=parseFloat(i);return i.endsWith("px")&&(s-=e),i.endsWith("%")&&(s-=this.getElementSize(t.parentElement)*e/100),this.getElementSize(t)+s}handleResizeEvent(t){return window.TouchEvent&&t instanceof TouchEvent?t.touches.item(0):window.MouseEvent&&t instanceof MouseEvent?t:void 0}normalizeDepth(){let t=this.el;for(let s=0;s<this.depth;s++)t=t.parentElement;return t}connectedCallback(){const t=this.normalizeDepth();if("column"==getComputedStyle(t.parentElement)["flex-direction"]||"column-reverse"==getComputedStyle(t.parentElement)["flex-direction"]?(this.el.classList.add("column-resizer"),this.cursor="row-resize"):(this.el.classList.add("row-resizer"),this.cursor="col-resize"),this.disabled)return void(t.style.display="none");this.a=t.previousElementSibling,this.b=t.nextElementSibling;let s=localStorage.getItem(this.localStorageKey+"a");null!=s&&this.save&&(this.a.style["flex-grow"]=s,this.b.style["flex-grow"]=localStorage.getItem(this.localStorageKey+"b"))}watchName(t){this.localStorageKey="flex-resizer-"+t,this.connectedCallback()}watchDisabled(t){let s=this.normalizeDepth();t||this.connectedCallback(),s.style.display=t?"none":"block"}get el(){return i(this)}static get watchers(){return{name:["watchName"],disabled:["watchDisabled"]}}};e.style=".sc-flex-resizer-h{display:block}div.sc-flex-resizer{height:100%;width:100%}.column-resizer.sc-flex-resizer{cursor:row-resize}.row-resizer.sc-flex-resizer{cursor:col-resize}";export{e as flex_resizer}