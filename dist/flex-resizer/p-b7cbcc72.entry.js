import{r as t,h as i,g as s}from"./p-4TGfUf4N.js";const e=()=>`.sc-flex-resizer-h{display:block}div.sc-flex-resizer{height:100%;width:100%}.column-resizer.sc-flex-resizer{cursor:row-resize}.row-resizer.sc-flex-resizer{cursor:col-resize}`;const h=class{constructor(i){t(this,i);this.depth=0;this.overrideIframe=true;this.name="";this.save=true;this.disabled=false;this.resizing=false;this.direction=1;this.localStorageKey="flex-resizer-"+this.name;this.resizeStart=this.resizeStart.bind(this);this.resize=this.resize.bind(this);this.resizeEnd=this.resizeEnd.bind(this);this.handleKeyDown=this.handleKeyDown.bind(this)}render(){return i("div",{key:"4e2e9539fcfe4abdc147f7e6a24803bdcd46d6ca"})}resizeStart(t){let i=this.normalizeDepth();this.a=i.previousElementSibling;this.b=i.nextElementSibling;if(this.a===null||this.resizing){console.log("Nothing to resize");return}this.totalFlexGrow=parseFloat(getComputedStyle(this.a)["flex-grow"])+parseFloat(getComputedStyle(this.b)["flex-grow"]);this.aOriginalGrow=getComputedStyle(this.a)["flex-grow"];this.bOriginalGrow=getComputedStyle(this.b)["flex-grow"];if(this.totalFlexGrow===0){console.log("Cannot resize - no flex-grow");return}let s=""+getComputedStyle(i.parentElement).flexDirection;switch(s){case"column-reverse":case"column":this.getElementSize=t=>t.clientHeight;this.getPosition=t=>t.screenY;break;case"row-reverse":default:this.getElementSize=t=>t.clientWidth;this.getPosition=t=>t.screenX}this.direction=s.endsWith("-reverse")?-1:1;this.psize=this.computeSize(this.a);this.startPos=this.getPosition(this.handleResizeEvent(t));this.resizeCurrentPos=this.startPos;this.nsize=this.computeSize(this.b);this.totalHeight=this.psize+this.nsize;document.body.style.cursor=this.cursor;this.resizing=true;t.preventDefault();if(this.overrideIframe){for(let t of document.getElementsByTagName("iframe")){t.style.pointerEvents="none"}}window.addEventListener("mousemove",this.resize);window.addEventListener("touchmove",this.resize);window.addEventListener("mouseup",this.resizeEnd);window.addEventListener("touchend",this.resizeEnd);window.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){if(t.key==="Escape"){this.cancelResize()}}cancelResize(){this.a.style["flex-grow"]=this.aOriginalGrow;this.b.style["flex-grow"]=this.bOriginalGrow;this.resizeEnd()}resizeEnd(){if(this.save){localStorage.setItem(this.localStorageKey+"a",this.a.style["flex-grow"]);localStorage.setItem(this.localStorageKey+"b",this.b.style["flex-grow"])}window.removeEventListener("mousemove",this.resize);window.removeEventListener("mouseup",this.resizeEnd);window.removeEventListener("keydown",this.handleKeyDown);window.removeEventListener("touchmove",this.resize);window.removeEventListener("touchend",this.resizeEnd);this.resizing=false;document.body.style.cursor="default";if(this.overrideIframe){for(let t of document.getElementsByTagName("iframe")){t.style.pointerEvents="auto"}}}resize(t){t.preventDefault();let i=this.getPosition(this.handleResizeEvent(t));let s=(i-this.resizeCurrentPos)*this.direction;this.psize+=s;this.nsize-=s;if(this.psize<0){this.nsize+=this.psize;i-=this.psize;this.psize=0}if(this.nsize<0){this.psize+=this.nsize;i+=this.nsize;this.nsize=0}let e=this.totalFlexGrow*(this.psize/this.totalHeight);let h=this.totalFlexGrow*(this.nsize/this.totalHeight);this.resizeCurrentPos=i;this.a.style["flex-grow"]=e;this.b.style["flex-grow"]=h}computeSize(t){let i=getComputedStyle(t);let s=0;let e=""+i["flex-basis"];let h=parseFloat(e);if(e.endsWith("px")){s-=h}if(e.endsWith("%")){s-=this.getElementSize(t.parentElement)*h/100}return this.getElementSize(t)+s}handleResizeEvent(t){if(window.TouchEvent&&t instanceof TouchEvent){return t.touches.item(0)}if(window.MouseEvent&&t instanceof MouseEvent){return t}}normalizeDepth(){let t=this.el;for(let i=0;i<this.depth;i++){t=t.parentElement}return t}async refresh(){this.initialize()}initialize(){const t=this.normalizeDepth();if(getComputedStyle(t.parentElement)["flex-direction"]=="column"||getComputedStyle(t.parentElement)["flex-direction"]=="column-reverse"){this.el.classList.remove("row-resizer");this.el.classList.add("column-resizer");this.cursor="row-resize"}else{this.el.classList.remove("column-resizer");this.el.classList.add("row-resizer");this.cursor="col-resize"}if(this.disabled){t.style.display="none";return}this.a=t.previousElementSibling;this.b=t.nextElementSibling;let i=localStorage.getItem(this.localStorageKey+"a");if(i==null||!this.save){return}this.a.style["flex-grow"]=i;this.b.style["flex-grow"]=localStorage.getItem(this.localStorageKey+"b")}connectedCallback(){this.initialize()}watchName(t){this.localStorageKey="flex-resizer-"+t;this.initialize()}watchDisabled(t){let i=this.normalizeDepth();if(t){this.a.style["flex-grow"]=null;this.b.style["flex-grow"]=null}else{this.initialize()}i.style.display=t?"none":"block"}get el(){return s(this)}static get watchers(){return{name:["watchName"],disabled:["watchDisabled"]}}};h.style=e();export{h as flex_resizer};
//# sourceMappingURL=p-b7cbcc72.entry.js.map