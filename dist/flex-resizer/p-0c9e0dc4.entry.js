import{r as t,h as s,g as i}from"./p-DrRobMHa.js";const e=".sc-flex-resizer-h{display:block}div.sc-flex-resizer{height:100%;width:100%}.column-resizer.sc-flex-resizer{cursor:row-resize}.row-resizer.sc-flex-resizer{cursor:col-resize}";const h=class{constructor(s){t(this,s);this.depth=0;this.overrideIframe=true;this.name="";this.save=true;this.disabled=false;this.resizing=false;this.direction=1;this.localStorageKey="flex-resizer-"+this.name;this.resizeStart=this.resizeStart.bind(this);this.resize=this.resize.bind(this);this.resizeEnd=this.resizeEnd.bind(this);this.handleKeyDown=this.handleKeyDown.bind(this)}render(){return s("div",{key:"54788d664370c38a7af54555088dd2fc7b42fd22"})}resizeStart(t){let s=this.normalizeDepth();this.a=s.previousElementSibling;this.b=s.nextElementSibling;if(this.a===null||this.resizing){console.log("Nothing to resize");return}this.totalFlexGrow=parseFloat(getComputedStyle(this.a)["flex-grow"])+parseFloat(getComputedStyle(this.b)["flex-grow"]);this.aOriginalGrow=getComputedStyle(this.a)["flex-grow"];this.bOriginalGrow=getComputedStyle(this.b)["flex-grow"];if(this.totalFlexGrow===0){console.log("Cannot resize - no flex-grow");return}let i=""+getComputedStyle(s.parentElement).flexDirection;switch(i){case"column-reverse":case"column":this.getElementSize=t=>t.clientHeight;this.getPosition=t=>t.screenY;break;case"row-reverse":default:this.getElementSize=t=>t.clientWidth;this.getPosition=t=>t.screenX}this.direction=i.endsWith("-reverse")?-1:1;this.psize=this.computeSize(this.a);this.startPos=this.getPosition(this.handleResizeEvent(t));this.resizeCurrentPos=this.startPos;this.nsize=this.computeSize(this.b);this.totalHeight=this.psize+this.nsize;document.body.style.cursor=this.cursor;this.resizing=true;t.preventDefault();if(this.overrideIframe){for(let t of document.getElementsByTagName("iframe")){t.style.pointerEvents="none"}}window.addEventListener("mousemove",this.resize);window.addEventListener("touchmove",this.resize);window.addEventListener("mouseup",this.resizeEnd);window.addEventListener("touchend",this.resizeEnd);window.addEventListener("keydown",this.handleKeyDown)}handleKeyDown(t){if(t.key==="Escape"){this.cancelResize()}}cancelResize(){this.a.style["flex-grow"]=this.aOriginalGrow;this.b.style["flex-grow"]=this.bOriginalGrow;this.resizeEnd()}resizeEnd(){if(this.save){localStorage.setItem(this.localStorageKey+"a",this.a.style["flex-grow"]);localStorage.setItem(this.localStorageKey+"b",this.b.style["flex-grow"])}window.removeEventListener("mousemove",this.resize);window.removeEventListener("mouseup",this.resizeEnd);window.removeEventListener("keydown",this.handleKeyDown);window.removeEventListener("touchmove",this.resize);window.removeEventListener("touchend",this.resizeEnd);this.resizing=false;document.body.style.cursor="default";if(this.overrideIframe){for(let t of document.getElementsByTagName("iframe")){t.style.pointerEvents="auto"}}}resize(t){t.preventDefault();let s=this.getPosition(this.handleResizeEvent(t));let i=(s-this.resizeCurrentPos)*this.direction;this.psize+=i;this.nsize-=i;if(this.psize<0){this.nsize+=this.psize;s-=this.psize;this.psize=0}if(this.nsize<0){this.psize+=this.nsize;s+=this.nsize;this.nsize=0}let e=this.totalFlexGrow*(this.psize/this.totalHeight);let h=this.totalFlexGrow*(this.nsize/this.totalHeight);this.resizeCurrentPos=s;this.a.style["flex-grow"]=e;this.b.style["flex-grow"]=h}computeSize(t){let s=getComputedStyle(t);let i=0;let e=""+s["flex-basis"];let h=parseFloat(e);if(e.endsWith("px")){i-=h}if(e.endsWith("%")){i-=this.getElementSize(t.parentElement)*h/100}return this.getElementSize(t)+i}handleResizeEvent(t){if(window.TouchEvent&&t instanceof TouchEvent){return t.touches.item(0)}if(window.MouseEvent&&t instanceof MouseEvent){return t}}normalizeDepth(){let t=this.el;for(let s=0;s<this.depth;s++){t=t.parentElement}return t}connectedCallback(){const t=this.normalizeDepth();if(getComputedStyle(t.parentElement)["flex-direction"]=="column"||getComputedStyle(t.parentElement)["flex-direction"]=="column-reverse"){this.el.classList.remove("row-resizer");this.el.classList.add("column-resizer");this.cursor="row-resize"}else{this.el.classList.remove("column-resizer");this.el.classList.add("row-resizer");this.cursor="col-resize"}if(this.disabled){t.style.display="none";return}this.a=t.previousElementSibling;this.b=t.nextElementSibling;let s=localStorage.getItem(this.localStorageKey+"a");if(s==null||!this.save){return}this.a.style["flex-grow"]=s;this.b.style["flex-grow"]=localStorage.getItem(this.localStorageKey+"b")}watchName(t){this.localStorageKey="flex-resizer-"+t;this.connectedCallback()}watchDisabled(t){let s=this.normalizeDepth();if(t){this.a.style["flex-grow"]=null;this.b.style["flex-grow"]=null}else{this.connectedCallback()}s.style.display=t?"none":"block"}get el(){return i(this)}static get watchers(){return{name:["watchName"],disabled:["watchDisabled"]}}};h.style=e;export{h as flex_resizer};
//# sourceMappingURL=p-0c9e0dc4.entry.js.map